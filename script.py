"""Script to calculate distance for list of drives"""

from datetime import datetime
import json
import googlemaps
import config

def chunks(l,n):
    """Yield successive n-sized chunks from l."""
    for i in range(0, len(l), n):
        yield l[i:i + n]

gmaps = googlemaps.Client(key=config.key)

# API will only accept a combined total of 25 Origins and Destinations so split your list into a list of lists no larger than 12 each.
start = list(chunks(["4002 Oakridge Dr, Crestwood","4002 Oakridge Dr, Crestwood","4002 Oakridge Dr, Crestwood","4002 Oakridge Dr, Crestwood","4002 Oakridge Dr, Crestwood","4002 Oakridge Dr, Crestwood","4002 Oakridge Dr, Crestwood","4002 Oakridge Dr, Crestwood","4002 Oakridge Dr, Crestwood","4002 Oakridge Dr, Crestwood","4002 Oakridge Dr, Crestwood","4002 Oakridge Dr, Crestwood","4002 Oakridge Dr, Crestwood","4002 Oakridge Dr, Crestwood","4002 Oakridge Dr, Crestwood","4002 Oakridge Dr, Crestwood","4002 Oakridge Dr, Crestwood","4002 Oakridge Dr, Crestwood","4002 Oakridge Dr, Crestwood","4002 Oakridge Dr, Crestwood","4002 Oakridge Dr, Crestwood","4002 Oakridge Dr, Crestwood","4002 Oakridge Dr, Crestwood","4002 Oakridge Dr, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood","3109 Horseshoe Ct, Crestwood"],12))
end = list(chunks(["4419 Burgundy Dr, Louisville","7404 Stone Bluff Ct, Louisville","5229 Silverton Ln, Louisville","7301 Trail Crest Ct, Louisville","16901 Empire Ct, Louisville","10000 Falling Tree Way, Louisville","1016 Colonel Anderson Pkwy, Louisville","5516 Speedway Ave, Louisville","9713 Secretariat Dr, Louisville","7901 Princess Wood Ct, Louisville","7923 Arnoldtown Rd, Louisville","7931 Stovall Ct, Louisville","3501 Lodge Ln Unit# 204, Louisville","3506 LODGE Ln Unit# 327, Louisville","2837 Goose Creek Rd Unit# 3, Louisville","4306 Wisteria Landing Cir Unit# 201, Louisville","6300 Wisteria View Ln Unit# 103, Louisville","8101 Wendamoor Dr Unit# 13, Louisville","10411 Pebblestone Cir, Louisville","5602 Redondo Cir, Louisville","1212 Donard Park Ave, Louisville","1212 Donard Park Ave, Louisville","14400 Brook Forest Pl, Louisville","14301 Willow Grove Cir, Louisville","14106 Willow Grove Way, Louisville","14301 Willow Grove Cir, Louisville","930 Lake Forest Pkwy, Louisville","14509 Maple Glenn Pl, Louisville","909 Lake Forest Pkwy, Louisville","14405 Maple Ridge Pl, Louisville","843 Lake Forest Pkwy, Louisville","14628 Inspiration Ct, Louisville","14619 Inspiration Ct, Louisville","813 Inspiration Way, Louisville","14809 LANDIS LAKES Dr, Louisville","14610 Landis Lakes Dr, Louisville","1016 Colonel Anderson Pkwy, Louisville","1000 Colonel Anderson Pkwy, Louisville","2302 Claymore Cir, Louisville","1307 Crosstimbers Dr, Louisville","17418 Polo Run Ln, Louisville","3707 Lake Jericho Rd, Smithfield","2641 Fort Pickens Rd, La Grange","117 Shelby St, Eminence","255 E CROSS MAIN St, New Castle","172 College St, New Castle","4340 Cavelle Ave, Louisville","5620 Revere Dr, Louisville","1258 Lipps Ln, Louisville","3904 Old Outer Loop, Louisville","9600 Polaris Dr, Louisville","6105 Herron Ct, Louisville","6512 E Manslick Rd, Louisville","3615 Foreman Ln, Louisville","7228 Buck Creek Rd Unit# F, Finchville","148 Barberry Ln, Bardstown","1211 Heatherbourne Dr, La Grange","200 Short St, Shelbyville","3606 Briarcliff Ct, Louisville","3606 Briarcliff Ct, Louisville","1902 Wickham Way, Louisville","5505 Woodcross Pl, Louisville","2905 Windsor Forest Dr, Louisville","304 W Madison St, La Grange","11005 Cedar Hill Ct, Louisville","9826 Longwood Cir, Louisville","2803 Rosalee Ave, Louisville","5900 haunz Ln, Louisville","106 Clifton Ct, Shelbyville","110 Clifton Ct, Shelbyville","117 Clifton Ct, Shelbyville","81 Clifton Ct, Shelbyville","101 Clifton Ct, Shelbyville","111 Clifton Ct, Shelbyville","23 Madie Ln, Shelbyville","56 Maidie Ln, Shelbyville","64 Maidie Ln, Shelbyville","5933 Midnight Ln, Louisville","12504 Lilly Ln, Louisville","7643 3rd Street Rd, Louisville","5215 Cool Brook Rd, Louisville","9826 Longwood Cir, Louisville","7437 Virginia Ave, Louisville","6718 Hunters Creek Blvd, Louisville","3311 Barbers Ln, Louisville","3407 Sumac Rd, Louisville","2802 Clark Station Rd, Fisherville","1604 Cypress St, Louisville","1146 Euclid Ave, Louisville","1505 Homeview Dr, Louisville","3515 Parthenia Ave, Louisville","601 Beecher St, Louisville","1050 Oakwood Ave, Louisville","4112 Lees Ln, Louisville","6906 John Adams Way, Louisville","2802 Clark Station Rd, Fisherville","4112 Lees Ln, Louisville","1146 Euclid Ave, Louisville","1505 Homeview Dr, Louisville","3515 Parthenia Ave, Louisville","1050 Oakwood Ave, Louisville","2213 Thistledawn Dr, Louisville","4315 Lynnview Dr, Louisville","4207 Lees Ln, Louisville","6103 Crockett Dr, Louisville","6907 Sky Blue Ave, Louisville","5153 Maryman Rd, Louisville"],12))

# Must set a departure time when using mode="driving"
now = datetime.now()

# Iterate through your "chunks" of Origins and Destinations
for i in range(0,len(start)):
    for x in range(0,len(start[i])):
        directions_result = gmaps.distance_matrix(start[i][x],end[i][x],mode="driving",units="imperial",departure_time=now)
        
        for dest in directions_result['rows'][0]['elements']:
            if "distance" in dest:
                print(dest['distance']['text'])
            else:
                # If an address is mispelled you will get a key error regarding 'distance'
                # Best to just take note of which address failed to fix later
                print("Invalid origin ({}) or destination({})".format(start[i][x],end[i][x]))
